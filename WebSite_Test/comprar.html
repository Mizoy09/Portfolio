<!doctype html>
<html lang="pt">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Pagamento — Loja de Jogos</title>

  <style>
    * { box-sizing: border-box; }
    html, body { margin:0; height:100%; font-family:Inter, Roboto, Arial, sans-serif; background:#f6f7f9; color:#222; }
    a { color:inherit; text-decoration:none; }

    .header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 10px 20px;
      background: white;
      border-bottom: 1px solid #e3e6ea;
      position: sticky;
      top: 0;
      z-index: 20;
    }

    .logo {
      display: flex;
      align-items: center;
      text-decoration: none;
      color: black;
      font-size: 20px;
      font-weight: bold;
    }
    .logo img { height: 40px; margin-right: 10px; border-radius: 8px; }

    .logo .mark { width:36px; height:36px; border-radius:6px; background:linear-gradient(135deg,#5b8cff,#00d4ff); }
    .nav { display:flex; gap:12px; align-items:center; }
    .nav .nav-item { padding:8px 12px; border-radius:6px; cursor:pointer; }
    .nav .nav-item:hover { background:#f0f4ff; }
    .btn { padding:8px 12px; border-radius:6px; background:#0070f3; color:#fff; border:none; cursor:pointer; font-weight:600; }
    .btn.ghost { background:transparent; color:#333; border:1px solid #e0e3e8; }

    .pay-container {
      max-width:520px; margin:36px auto; background:#fff; border:1px solid #eceff3; padding:26px; border-radius:12px;
      box-shadow:0 6px 18px rgba(15,23,42,0.04);
    }
    .pay-container h2 { margin:0 0 6px 0; }
    .pay-container p { margin:0 0 18px 0; color:#666; font-size:14px; }

    .field { display:flex; flex-direction:column; margin-bottom:12px; position:relative; }
    .field label { font-size:13px; margin-bottom:6px; color:#333; }
    .field input {
      padding:10px 12px; border:1px solid #dfe2e6; border-radius:8px; font-size:14px; outline:none;
      transition:box-shadow .12s, border-color .12s;
    }
    .field input:focus { box-shadow:0 6px 18px rgba(11,84,255,0.06); border-color:#b6d1ff; }
    .row { display:flex; gap:10px; }
    .row .field { flex:1; }

    .hint { font-size:12px; color:#888; margin-top:6px; }
    .error { color:#c0392b; font-size:12px; margin-top:6px; display:none; }

    /* Overlay sucesso */
    .overlay {
      position:fixed; inset:0; display:flex; align-items:center; justify-content:center;
      background:rgba(10,20,40,0.35); z-index:60; opacity:0; pointer-events:none; transition:opacity .2s;
    }
    .overlay.show { opacity:1; pointer-events:auto; }
    .receipt {
      background:#fff; padding:20px 22px; border-radius:12px; min-width:300px; max-width:90%;
      box-shadow:0 12px 40px rgba(11,84,255,0.08); text-align:center;
    }
    .receipt h3 { margin:0 0 8px 0; color:#0a7a3b; }
    .receipt p { margin:0 0 12px 0; color:#333; }
    .small { font-size:13px; color:#666; margin-bottom:12px; }

    /* Loading botão */
    .btn.loading { position:relative; pointer-events:none; opacity:.9; }
    .btn.loading::after {
      content:""; position:absolute; right:12px; top:50%; transform:translateY(-50%);
      width:14px; height:14px; border-radius:50%; border:2px solid rgba(255,255,255,0.6);
      border-left-color:transparent; animation:spin .9s linear infinite;
    }

    .mark {
      height: 150px;        /* высота блока с картинкой */
      overflow: hidden;     /* обрезает лишнее */
    }

    .mark img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }


    @keyframes spin { to{ transform:translateY(-50%) rotate(360deg) } }

    @media (max-width:520px) {
      .pay-container { margin:20px 12px; padding:18px; }
      .row { flex-direction:column; }
    }
  </style>
</head>
<body>

<header class="header">
  <a href="index.php" class="logo">
    <span class="mark" aria-hidden="true">
      <img src="image/steam.jpg" alt="">
    </span>
    <span>Steam</span>
  </a>

  <a href="conta.html" class="btn">Conta</a>
</header>

<main>
  <div class="pay-container" role="main" aria-labelledby="pay-heading">
    <h1 id="pay-heading">Pagamento</h1>
    <p>Preencha os dados do cartão corretamente — a formatação será automática.</p>

    <div class="field">
      <label for="card-name">Nome no Cartão</label>
      <input id="card-name" type="text" placeholder="João Silva" autocomplete="cc-name" />
      <div class="error" id="err-name"></div>
    </div>

    <div class="field">
      <label for="card-number">Número do Cartão</label>
      <input id="card-number" type="text" inputmode="numeric" autocomplete="cc-number" maxlength="19" placeholder="0000 0000 0000 0000" />
      <div class="hint">Grupos de 4 dígitos — espaços automáticos</div>
      <div class="error" id="err-number"></div>
    </div>

    <div class="row">
      <div class="field">
        <label for="card-exp">Validade (MM/AA)</label>
        <input id="card-exp" type="text" inputmode="numeric" maxlength="5" placeholder="MM/AA" autocomplete="cc-exp" />
        <div class="error" id="err-exp"></div>
      </div>

      <div class="field">
        <label for="card-cvv">CVV</label>
        <input id="card-cvv" type="password" inputmode="numeric" maxlength="4" placeholder="123" autocomplete="cc-csc" />
        <div class="error" id="err-cvv"></div>
      </div>
    </div>

    <button id="pay-btn" class="btn" style="width:100%;margin-top:8px;">Finalizar Pagamento</button>
  </div>
</main>

<!-- Overlay sucesso -->
<div id="overlay" class="overlay" aria-hidden="true">
  <div class="receipt" role="dialog" aria-modal="true" aria-labelledby="receipt-title">
    <h3 id="receipt-title">Jogo Recebido!</h3>
    <p class="small" id="receipt-msg">Pagamento concluído com sucesso! O seu jogo já está disponível na sua conta.</p>
    <div id="order-id" style="font-weight:700;margin-bottom:12px;color:#0a7a3b"></div>
    <button id="close-btn" class="btn" style="width:100%;">Fechar</button>
  </div>
</div>

<script>
  const cardNumber = document.getElementById('card-number');
  const cardExp = document.getElementById('card-exp');
  const cardCvv = document.getElementById('card-cvv');
  const cardName = document.getElementById('card-name');
  const payBtn = document.getElementById('pay-btn');

  const errName = document.getElementById('err-name');
  const errNumber = document.getElementById('err-number');
  const errExp = document.getElementById('err-exp');
  const errCvv = document.getElementById('err-cvv');

  const overlay = document.getElementById('overlay');
  const orderIdEl = document.getElementById('order-id');
  const closeBtn = document.getElementById('close-btn');

  // Formatação número cartão
  cardNumber.addEventListener('input', (e) => {
    let value = e.target.value.replace(/\D/g,'').slice(0,16);
    const parts = [];
    for(let i=0;i<value.length;i+=4) parts.push(value.slice(i,i+4));
    e.target.value = parts.join(' ');
  });

  // Formatação validade
  cardExp.addEventListener('input', (e) => {
    let v = e.target.value.replace(/\D/g,'').slice(0,4);
    if(v.length>2) e.target.value = v.slice(0,2)+'/'+v.slice(2);
    else e.target.value = v;
  });

  // Apenas números CVV
  cardCvv.addEventListener('input', (e)=>{e.target.value=e.target.value.replace(/\D/g,'').slice(0,3);});

  function validate() {
    let ok = true;
    if(!cardName.value.trim()){ errName.textContent="Preencha o nome"; errName.style.display='block'; ok=false;} else{errName.style.display='none';}
    if(cardNumber.value.replace(/\s/g,'').length!==16){errNumber.textContent="Número inválido"; errNumber.style.display='block'; ok=false;} else{errNumber.style.display='none';}
    if(!/^\d{2}\/\d{2}$/.test(cardExp.value)){errExp.textContent="Formato inválido"; errExp.style.display='block'; ok=false;} else{errExp.style.display='none';}
    if(cardCvv.value.length<3){errCvv.textContent="CVV inválido"; errCvv.style.display='block'; ok=false;} else{errCvv.style.display='none';}
    return ok;
  }

  payBtn.addEventListener('click', ()=>{
    if(!validate()) return;
    payBtn.classList.add('loading');
    setTimeout(()=>{
      payBtn.classList.remove('loading');
      // Gera ID pedido
      const orderId = 'ID'+Math.floor(Math.random()*900000+100000);
      orderIdEl.textContent = orderId;
      overlay.classList.add('show');
    },1500);
  });

  closeBtn.addEventListener('click', ()=>{
    // Скрываем overlay (опционально)
    overlay.classList.remove('show');
    // Перенаправление на главную страницу
    window.location.href = "index.php";
});


// Получаем название игры из URL
const urlParams = new URLSearchParams(window.location.search);
const selectedGame = urlParams.get('game');

if (selectedGame) {
  const payHeading = document.getElementById('pay-heading');
  if (payHeading) {
    payHeading.textContent = `Pagamento — ${selectedGame}`;
  }
}



</script>
</body>
</html>
